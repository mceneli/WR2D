<?xml version="1.0" encoding="utf-8" ?>
<c2eventsheet>
    <!--All the 'name' attributes are ignored by Construct 2 - they are there for readability only.-->
    <name>Event sheet 1</name>
    <events>
        <event-group description="" sid="562430596163303" title="Signalling">
            <sub-events>
                <event-block sid="172138815172734">
                    <conditions>
                        <condition id="-2" name="On start of layout" sid="415984598357627" type="System" />
                    </conditions>
                    <actions>
                        <action id="15" name="Add client input value" sid="978045071603150" type="Multiplayer">
                            <param id="0" name="Tag">&quot;pangle&quot;</param>
                            <param id="1" name="Precision">2</param>
                            <param id="2" name="Interpolation">0</param>
                        </action>
                        <action id="15" name="Add client input value" sid="340702213742236" type="Multiplayer">
                            <param id="0" name="Tag">&quot;moveangle&quot;</param>
                            <param id="1" name="Precision">2</param>
                            <param id="2" name="Interpolation">0</param>
                        </action>
                        <action id="11" name="Sync object" sid="328250275310404" type="Multiplayer">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Data">3</param>
                            <param id="2" name="Precision">1</param>
                            <param id="3" name="Bandwidth">0</param>
                        </action>
                        <action id="12" name="Sync instance variable" sid="705687374026568" type="Multiplayer">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Instance variable">Player|id</param>
                            <param id="2" name="Precision">2</param>
                            <param id="3" name="Interpolation">0</param>
                            <param id="4" name="Client value tag">&quot;pangle&quot;</param>
                        </action>
                        <action id="12" name="Sync instance variable" sid="523081157437999" type="Multiplayer">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Instance variable">Player|id</param>
                            <param id="2" name="Precision">2</param>
                            <param id="3" name="Interpolation">0</param>
                            <param id="4" name="Client value tag">&quot;moveangle&quot;</param>
                        </action>
                        <action id="1" name="Connect" sid="785209225636631" type="Multiplayer">
                            <param id="0" name="Server">&quot;wss://multiplayer.scirra.com&quot;</param>
                        </action>
                    </actions>
                    <sub-events>
                        <event-block sid="112162262639529">
                            <conditions>
                                <condition id="12" inverted="1" name="Supports multiplayer" sid="408307563351384" type="Multiplayer" />
                            </conditions>
                            <actions>
                                <action id="-15" name="Set visible" sid="247115393045238" type="mperror">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="368441143736518">
                            <conditions>
                                <condition id="12" name="Supports multiplayer" sid="411992485299120" type="Multiplayer" />
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="109014906576532" type="mperror">
                                    <param id="0" name="Text">&quot;Multiplayer supports&quot;</param>
                                </action>
                                <action id="-15" name="Set visible" sid="687230390607413" type="mperror">
                                    <param id="0" name="Visibility">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
                <event-block sid="283217180865424">
                    <conditions>
                        <condition id="2" name="On connected" sid="840980424606128" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="4" name="Log in" sid="364339470484539" type="Multiplayer">
                            <param id="0" name="Alias">PLAYER_NAME</param>
                        </action>
                        <action id="0" name="Set text" sid="467985716395859" type="mperror">
                            <param id="0" name="Text">&quot;Logged in&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="429945122229127">
                    <conditions>
                        <condition id="4" name="On logged in" sid="138202763831978" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="5" name="Join room" sid="673910574928818" type="Multiplayer">
                            <param id="0" name="Game">GAME_NAME</param>
                            <param id="1" name="Instance">INSTANCE_NAME</param>
                            <param id="2" name="Room">ROOM_NAME</param>
                            <param id="3" name="Max peers">2</param>
                        </action>
                        <action id="0" name="Set text" sid="639682690329467" type="mperror">
                            <param id="0" name="Text">&quot;Joined Room&quot;</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="961929576868950">
                    <conditions>
                        <condition id="5" name="On joined room" sid="425628196482205" type="Multiplayer" />
                    </conditions>
                    <actions />
                    <sub-events>
                        <event-block sid="491349465512195">
                            <conditions>
                                <condition id="10" name="Is host" sid="295589900417538" type="Multiplayer" />
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="465821606726044" type="mperror">
                                    <param id="0" name="Text">&quot;Connected as Host&quot;</param>
                                </action>
                                <action id="-10" name="Set value" sid="255378042222528" type="Player">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Value">Multiplayer.MyID</param>
                                </action>
                                <action id="13" name="Associate object with peer" sid="453426066477064" type="Multiplayer">
                                    <param id="0" name="Object">Player</param>
                                    <param id="1" name="Peer ID">Multiplayer.MyID</param>
                                </action>
                                <action id="-12" name="Set group active" sid="882704812369342" type="System">
                                    <param id="0" name="Group name">&quot;Host&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                        <event-block sid="244060816216966">
                            <conditions>
                                <condition id="10" inverted="1" name="Is host" sid="996354777101977" type="Multiplayer" />
                            </conditions>
                            <actions>
                                <action id="0" name="Set text" sid="805446536403392" type="mperror">
                                    <param id="0" name="Text">&quot;Connected as Peer&quot;</param>
                                </action>
                                <action id="-9" name="Destroy" sid="720327644764070" type="Player" />
                                <action id="-12" name="Set group active" sid="400546768336568" type="System">
                                    <param id="0" name="Group name">&quot;Peer&quot;</param>
                                    <param id="1" name="State">1</param>
                                </action>
                            </actions>
                        </event-block>
                    </sub-events>
                </event-block>
            </sub-events>
        </event-group>
        <event-group description="" inactive="1" sid="349100579499588" title="Host">
            <sub-events>
                <event-block sid="348337427736768">
                    <conditions>
                        <condition id="11" name="On peer connected" sid="322517585469424" type="Multiplayer" />
                    </conditions>
                    <actions>
                        <action id="-3" name="Create object" sid="752839147735942" type="System">
                            <param id="0" name="Object to create">Player</param>
                            <param id="1" name="Layer">&quot;Objects&quot;</param>
                            <param id="2" name="X">980</param>
                            <param id="3" name="Y">1200</param>
                        </action>
                        <action id="-10" name="Set value" sid="230258473515778" type="Player">
                            <param id="0" name="Instance variable">id</param>
                            <param id="1" name="Value">Multiplayer.PeerID</param>
                        </action>
                        <action id="13" name="Associate object with peer" sid="963421500136381" type="Multiplayer">
                            <param id="0" name="Object">Player</param>
                            <param id="1" name="Peer ID">Multiplayer.PeerID</param>
                        </action>
                    </actions>
                </event-block>
                <event-group description="" sid="771287983093956" title="Controls">
                    <sub-events>
                        <event-block sid="868526066805241">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="133554373251729" type="Player">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Multiplayer.MyID</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="793713996709122">
                                    <conditions>
                                        <condition id="-1" name="Every tick" sid="898991306948333" type="System" />
                                    </conditions>
                                    <actions />
                                    <sub-events>
                                        <event-block sid="302919561846276">
                                            <conditions>
                                                <condition id="-8" name="Compare two values" sid="484528902117218" type="System">
                                                    <param id="0" name="First value">Touch.Beta</param>
                                                    <param id="1" name="Comparison">4</param>
                                                    <param id="2" name="Second value">0</param>
                                                </condition>
                                            </conditions>
                                            <actions>
                                                <action id="-8" name="Set angle" sid="724210101890111" type="Player">
                                                    <param id="0" name="Angle">-atan(Touch.Gamma/Touch.Beta)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                        <event-block sid="270200656673843">
                                            <conditions>
                                                <condition id="-22" name="Else" sid="420900246073711" type="System" />
                                            </conditions>
                                            <actions>
                                                <action id="-8" name="Set angle" sid="777098737259792" type="Player">
                                                    <param id="0" name="Angle">180-atan(Touch.Gamma/Touch.Beta)</param>
                                                </action>
                                            </actions>
                                        </event-block>
                                    </sub-events>
                                </event-block>
                                <event-block sid="522572608040315">
                                    <conditions>
                                        <condition id="4" name="Is touching object" sid="367490025143775" type="Touch">
                                            <param id="0" name="Object">biganalog</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="734110761254105" type="smallanalog">
                                            <param id="0" name="Object">biganalog</param>
                                            <param id="1" name="Image point (optional)">0</param>
                                        </action>
                                        <action id="-8" name="Set angle" sid="443617446581090" type="smallanalog">
                                            <param id="0" name="Angle">angle(biganalog.X,biganalog.Y,Touch.X(&quot;HUD&quot;),Touch.Y(&quot;HUD&quot;))</param>
                                        </action>
                                        <action id="-23" name="Move at angle" sid="711373648751299" type="smallanalog">
                                            <param id="0" name="Angle">Self.Angle</param>
                                            <param id="1" name="Distance">min(distance(biganalog.X,biganalog.Y,Touch.X(&quot;HUD&quot;),Touch.Y(&quot;HUD&quot;)),75)</param>
                                        </action>
                                        <action id="-23" name="Move at angle" sid="764888615199230" type="Player">
                                            <param id="0" name="Angle">smallanalog.Angle</param>
                                            <param id="1" name="Distance">4</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block disabled="1" sid="179900128364394">
                                    <conditions>
                                        <condition id="1" name="On any touch end" sid="157537513005087" type="Touch" />
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="220849739006043" type="smallanalog">
                                            <param id="0" name="Object">biganalog</param>
                                            <param id="1" name="Image point (optional)">0</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block sid="477537750427570">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="205634679722872" type="Player">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Multiplayer.PeerID</param>
                                </condition>
                            </conditions>
                            <actions>
                                <action id="-10" name="Set value" sid="517286311463539" type="Player">
                                    <param id="0" name="Instance variable">pangle</param>
                                    <param id="1" name="Value">Multiplayer.PeerState(Multiplayer.PeerID,&quot;pangle&quot;)</param>
                                </action>
                                <action id="-10" name="Set value" sid="377608610445370" type="Player">
                                    <param id="0" name="Instance variable">moveangle</param>
                                    <param id="1" name="Value">Multiplayer.PeerState(Multiplayer.PeerID,&quot;moveangle&quot;)</param>
                                </action>
                                <action id="-8" name="Set angle" sid="284916595840043" type="Player">
                                    <param id="0" name="Angle">Player.pangle</param>
                                </action>
                            </actions>
                            <sub-events>
                                <event-block sid="722215620197759">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="667805949458830" type="System">
                                            <param id="0" name="First value">Player.moveangle</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">-1</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-23" name="Move at angle" sid="789370047712630" type="Player">
                                            <param id="0" name="Angle">Player.moveangle</param>
                                            <param id="1" name="Distance">4</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group description="" inactive="1" sid="485064764701442" title="Peer">
            <sub-events>
                <event-block sid="294689937863165">
                    <conditions>
                        <condition id="-18" name="On created" sid="213660297587256" type="Player" />
                    </conditions>
                    <actions>
                        <action id="-10" name="Set value" sid="417450702294986" type="Player">
                            <param id="0" name="Instance variable">id</param>
                            <param id="1" name="Value">Multiplayer.PeerID</param>
                        </action>
                    </actions>
                </event-block>
                <event-block sid="901494905049952">
                    <conditions>
                        <condition id="-7" name="Compare instance variable" sid="438547842617691" type="Player">
                            <param id="0" name="Instance variable">id</param>
                            <param id="1" name="Comparison">0</param>
                            <param id="2" name="Value">Multiplayer.PeerID</param>
                        </condition>
                    </conditions>
                    <actions>
                        <action id="16" name="Enable local input prediction" sid="648849020880578" type="Multiplayer">
                            <param id="0" name="Object">Player</param>
                        </action>
                    </actions>
                </event-block>
                <event-group description="" sid="174264871185007" title="Peer Control">
                    <sub-events>
                        <event-block sid="965363723311229">
                            <conditions>
                                <condition id="17" name="On client update" sid="463002424820102" type="Multiplayer" />
                                <condition id="-7" name="Compare instance variable" sid="465746047226480" type="Player">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Multiplayer.PeerID</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="669259331449983">
                                    <conditions>
                                        <condition id="-8" name="Compare two values" sid="336203655163892" type="System">
                                            <param id="0" name="First value">Touch.Beta</param>
                                            <param id="1" name="Comparison">4</param>
                                            <param id="2" name="Second value">0</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="531549889583325" type="Player">
                                            <param id="0" name="Instance variable">pangle</param>
                                            <param id="1" name="Value">int(-atan(Touch.Gamma/Touch.Beta))</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="344209527920858">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="911892762823889" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="897129829981602" type="Player">
                                            <param id="0" name="Instance variable">pangle</param>
                                            <param id="1" name="Value">int(180-atan(Touch.Gamma/Touch.Beta))</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="844654538140682">
                                    <conditions />
                                    <actions>
                                        <action id="14" name="Set client state" sid="811659427466498" type="Multiplayer">
                                            <param id="0" name="Tag">&quot;pangle&quot;</param>
                                            <param id="1" name="Value">Player.pangle</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="692734460917901">
                                    <conditions>
                                        <condition id="4" name="Is touching object" sid="362771790995356" type="Touch">
                                            <param id="0" name="Object">biganalog</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-4" name="Set position to another object" sid="545462056597814" type="smallanalog">
                                            <param id="0" name="Object">biganalog</param>
                                            <param id="1" name="Image point (optional)">0</param>
                                        </action>
                                        <action id="-8" name="Set angle" sid="741666218851552" type="smallanalog">
                                            <param id="0" name="Angle">angle(biganalog.X,biganalog.Y,Touch.X(&quot;HUD&quot;),Touch.Y(&quot;HUD&quot;))</param>
                                        </action>
                                        <action id="-23" name="Move at angle" sid="535900509022222" type="smallanalog">
                                            <param id="0" name="Angle">Self.Angle</param>
                                            <param id="1" name="Distance">min(distance(biganalog.X,biganalog.Y,Touch.X(&quot;HUD&quot;),Touch.Y(&quot;HUD&quot;)),75)</param>
                                        </action>
                                        <action id="-10" name="Set value" sid="872751789063160" type="Player">
                                            <param id="0" name="Instance variable">moveangle</param>
                                            <param id="1" name="Value">int(smallanalog.Angle)</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="476786529762629">
                                    <conditions>
                                        <condition id="-22" name="Else" sid="785561447045640" type="System" />
                                    </conditions>
                                    <actions>
                                        <action id="-10" name="Set value" sid="372092235344289" type="Player">
                                            <param id="0" name="Instance variable">moveangle</param>
                                            <param id="1" name="Value">-1</param>
                                        </action>
                                    </actions>
                                </event-block>
                                <event-block sid="251310015160692">
                                    <conditions />
                                    <actions>
                                        <action id="14" name="Set client state" sid="663300147241048" type="Multiplayer">
                                            <param id="0" name="Tag">&quot;moveangle&quot;</param>
                                            <param id="1" name="Value">Player.moveangle</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                        <event-block disabled="1" sid="306069985271943">
                            <conditions>
                                <condition id="-7" name="Compare instance variable" sid="107423278318884" type="Player">
                                    <param id="0" name="Instance variable">id</param>
                                    <param id="1" name="Comparison">0</param>
                                    <param id="2" name="Value">Multiplayer.MyID</param>
                                </condition>
                            </conditions>
                            <actions />
                            <sub-events>
                                <event-block sid="316378251176409">
                                    <conditions>
                                        <condition id="4" name="Is touching object" sid="516589094568714" type="Touch">
                                            <param id="0" name="Object">biganalog</param>
                                        </condition>
                                    </conditions>
                                    <actions>
                                        <action id="-23" name="Move at angle" sid="582951894088301" type="Player">
                                            <param id="0" name="Angle">smallanalog.Angle</param>
                                            <param id="1" name="Distance">4</param>
                                        </action>
                                    </actions>
                                </event-block>
                            </sub-events>
                        </event-block>
                    </sub-events>
                </event-group>
            </sub-events>
        </event-group>
        <event-group description="" sid="675032723168648" title="Common" />
        <event-block sid="258572010436441">
            <conditions>
                <condition id="-1" name="Every tick" sid="767820751415573" type="System" />
            </conditions>
            <actions>
                <action id="0" name="Set text" sid="976917338303023" type="angletext">
                    <param id="0" name="Text">&quot;alpha:&quot; &amp; Touch.Alpha &amp; &quot;  beta:&quot; &amp; Touch.Beta &amp; &quot;  gama:&quot; &amp; Touch.Gamma</param>
                </action>
            </actions>
        </event-block>
        <event-block sid="739996634670247">
            <conditions>
                <condition id="1" name="On any touch end" sid="560022432860976" type="Touch" />
            </conditions>
            <actions>
                <action id="-4" name="Set position to another object" sid="157452293884638" type="smallanalog">
                    <param id="0" name="Object">biganalog</param>
                    <param id="1" name="Image point (optional)">0</param>
                </action>
            </actions>
        </event-block>
    </events>
</c2eventsheet>
